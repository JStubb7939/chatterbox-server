'use strict';

// Methods for stubbing HTTP requests and responses
module.exports = {

  response: function response() {
    this._ended = false;
    this._responseCode = null;
    this._headers = null;
    this._data = null;

    this.writeHead = function (responseCode, headers) {
      this._responseCode = responseCode;
      this._headers = headers;
    }.bind(this);

    this.end = function (data) {
      this._ended = true;
      this._data = data;
    }.bind(this);
  },

  request: function request(url, method, postdata) {
    this.url = url;
    this.method = method;
    this._postData = postdata;
    this.setEncoding = function () {/* noop */};

    this.addListener = this.on = function (type, callback) {
      if (type === 'data') {
        callback(JSON.stringify(this._postData));
      }

      if (type === 'end') {
        callback();
      }
    }.bind(this);
  }

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NlcnZlci9zcGVjL1N0dWJzLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJyZXNwb25zZSIsIl9lbmRlZCIsIl9yZXNwb25zZUNvZGUiLCJfaGVhZGVycyIsIl9kYXRhIiwid3JpdGVIZWFkIiwicmVzcG9uc2VDb2RlIiwiaGVhZGVycyIsImJpbmQiLCJlbmQiLCJkYXRhIiwicmVxdWVzdCIsInVybCIsIm1ldGhvZCIsInBvc3RkYXRhIiwiX3Bvc3REYXRhIiwic2V0RW5jb2RpbmciLCJhZGRMaXN0ZW5lciIsIm9uIiwidHlwZSIsImNhbGxiYWNrIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBQSxPQUFPQyxPQUFQLEdBQWlCOztBQUVmQyxZQUFVLG9CQUFXO0FBQ25CLFNBQUtDLE1BQUwsR0FBYyxLQUFkO0FBQ0EsU0FBS0MsYUFBTCxHQUFxQixJQUFyQjtBQUNBLFNBQUtDLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQSxTQUFLQyxLQUFMLEdBQWEsSUFBYjs7QUFFQSxTQUFLQyxTQUFMLEdBQWlCLFVBQVNDLFlBQVQsRUFBdUJDLE9BQXZCLEVBQWdDO0FBQy9DLFdBQUtMLGFBQUwsR0FBcUJJLFlBQXJCO0FBQ0EsV0FBS0gsUUFBTCxHQUFnQkksT0FBaEI7QUFDRCxLQUhnQixDQUdmQyxJQUhlLENBR1YsSUFIVSxDQUFqQjs7QUFLQSxTQUFLQyxHQUFMLEdBQVcsVUFBU0MsSUFBVCxFQUFlO0FBQ3hCLFdBQUtULE1BQUwsR0FBYyxJQUFkO0FBQ0EsV0FBS0csS0FBTCxHQUFhTSxJQUFiO0FBQ0QsS0FIVSxDQUdURixJQUhTLENBR0osSUFISSxDQUFYO0FBSUQsR0FqQmM7O0FBbUJmRyxXQUFTLGlCQUFTQyxHQUFULEVBQWNDLE1BQWQsRUFBc0JDLFFBQXRCLEVBQWdDO0FBQ3ZDLFNBQUtGLEdBQUwsR0FBV0EsR0FBWDtBQUNBLFNBQUtDLE1BQUwsR0FBY0EsTUFBZDtBQUNBLFNBQUtFLFNBQUwsR0FBaUJELFFBQWpCO0FBQ0EsU0FBS0UsV0FBTCxHQUFtQixZQUFXLENBQUUsVUFBWSxDQUE1Qzs7QUFFQSxTQUFLQyxXQUFMLEdBQW1CLEtBQUtDLEVBQUwsR0FBVSxVQUFTQyxJQUFULEVBQWVDLFFBQWYsRUFBeUI7QUFDcEQsVUFBSUQsU0FBUyxNQUFiLEVBQXFCO0FBQ25CQyxpQkFBU0MsS0FBS0MsU0FBTCxDQUFlLEtBQUtQLFNBQXBCLENBQVQ7QUFDRDs7QUFFRCxVQUFJSSxTQUFTLEtBQWIsRUFBb0I7QUFDbEJDO0FBQ0Q7QUFFRixLQVQ0QixDQVMzQlosSUFUMkIsQ0FTdEIsSUFUc0IsQ0FBN0I7QUFVRDs7QUFuQ2MsQ0FBakIiLCJmaWxlIjoiU3R1YnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBNZXRob2RzIGZvciBzdHViYmluZyBIVFRQIHJlcXVlc3RzIGFuZCByZXNwb25zZXNcbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHJlc3BvbnNlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9lbmRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3Jlc3BvbnNlQ29kZSA9IG51bGw7XG4gICAgdGhpcy5faGVhZGVycyA9IG51bGw7XG4gICAgdGhpcy5fZGF0YSA9IG51bGw7XG5cbiAgICB0aGlzLndyaXRlSGVhZCA9IGZ1bmN0aW9uKHJlc3BvbnNlQ29kZSwgaGVhZGVycykge1xuICAgICAgdGhpcy5fcmVzcG9uc2VDb2RlID0gcmVzcG9uc2VDb2RlO1xuICAgICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5lbmQgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB0aGlzLl9lbmRlZCA9IHRydWU7XG4gICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB9LmJpbmQodGhpcyk7XG4gIH0sXG5cbiAgcmVxdWVzdDogZnVuY3Rpb24odXJsLCBtZXRob2QsIHBvc3RkYXRhKSB7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XG4gICAgdGhpcy5fcG9zdERhdGEgPSBwb3N0ZGF0YTtcbiAgICB0aGlzLnNldEVuY29kaW5nID0gZnVuY3Rpb24oKSB7IC8qIG5vb3AgKi8gfTtcblxuICAgIHRoaXMuYWRkTGlzdGVuZXIgPSB0aGlzLm9uID0gZnVuY3Rpb24odHlwZSwgY2FsbGJhY2spIHtcbiAgICAgIGlmICh0eXBlID09PSAnZGF0YScpIHtcbiAgICAgICAgY2FsbGJhY2soSlNPTi5zdHJpbmdpZnkodGhpcy5fcG9zdERhdGEpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGUgPT09ICdlbmQnKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG5cbiAgICB9LmJpbmQodGhpcyk7XG4gIH1cblxufTtcbiJdfQ==